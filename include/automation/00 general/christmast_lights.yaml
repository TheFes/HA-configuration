id: c9be7372-de6f-4763-b0d0-23665b7f1e9b
alias: "00 - Christmass lights"
mode: parallel
trigger:
  - platform: state
    entity_id: light.tuinlampjes
    to:
      - "on"
      - "off"
    from:
      - "on"
      - "off"
    id: icicles
  - platform: state
    entity_id: light.eettafel
    to: "on"
    id: tree_star
  - platform: state
    entity_id: light.tv_lamp
    to:
      - "on"
      - "off"
    from:
      - "on"
      - "off"
    id: vase
  - platform: event
    event_type: esphome.button_pressed
    event_data:
      device: Eettafel
      click_type: long
    id: to_bed
condition:
  - alias: "It's Chirstmas time"
    condition: state
    entity_id: input_boolean.christmas_time
    state: "on"
action:
  - alias: "Which action?"
    choose:
      - conditions: "{{ trigger.id == 'icicles'}}"
        sequence:
          - alias: "Turn icicles on or off"
            service: "switch.turn_{{ trigger.to_state.state }}"
            target:
              entity_id: switch.ijspegels
      - conditions: "{{ trigger.id == 'vase'}}"
        sequence:
          - alias: "Wait until vase is available"
            wait_template: "{{ states('switch.kerstvaas') not in [ 'unavailable', 'unknown'] }}"
          - alias: "vase schakelen met tvlamp"
            service: "switch.turn_{{ trigger.to_state.state }}"
            target:
              entity_id: switch.kerstvaas
      - conditions: "{{ trigger.id == 'tree_star'}}"
        sequence:
          - alias: "Turn christmas tree and star on"
            service: switch.turn_on
            target:
              entity_id:
                - switch.kerstboom
                - switch.kerstster
      - conditions: "{{ trigger.id == 'to_bed'}}"
        sequence:
          - alias: "Turn christmas tree and star off"
            service: switch.turn_off
            target:
              entity_id:
                - switch.kerstboom
                - switch.kerstster
