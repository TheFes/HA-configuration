!function(){"use strict";var t,e=function(){return e=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e.apply(this,arguments)};function i(t,e,i,o){return new(i||(i=Promise))((function(n,s){function a(t){try{r(o.next(t))}catch(t){s(t)}}function c(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,c)}r((o=o.apply(t,e||[])).next())}))}function o(t,e){var i,o,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(r){return function(c){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(i=1,o&&(n=2&c[0]?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){a.label=c[1];break}if(6===c[0]&&a.label<n[1]){a.label=n[1],n=c;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(c);break}n[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],o=0}finally{i=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,r])}}}var n,s,a="kiosk-mode",c="kiosk_mode";!function(t){t.HEADER="kmHeader",t.SIDEBAR="kmSidebar",t.OVERFLOW="kmOverflow",t.MENU_BUTTON="kmMenuButton",t.ACCOUNT="kmAccount",t.SEARCH="kmSearch",t.ASSISTANT="kmAssistant",t.REFRESH="kmRefresh",t.UNUSED_ENTITIES="kmUnusedEntities",t.RELOAD_RESOURCES="kmReloadResources",t.EDIT_DASHBOARD="kmEditDashboard",t.MOUSE="kmMouse"}(n||(n={})),function(t){t.KIOSK="kiosk",t.CACHE="cache",t.CLEAR_CACHE="clear_km_cache",t.DISABLE_KIOSK_MODE="disable_km",t.HIDE_SIDEBAR="hide_sidebar",t.HIDE_HEADER="hide_header",t.HIDE_OVERFLOW="hide_overflow",t.HIDE_MENU_BUTTON="hide_menubutton",t.HIDE_ACCOUNT="hide_account",t.HIDE_SEARCH="hide_search",t.HIDE_ASSISTANT="hide_assistant",t.HIDE_REFRESH="hide_refresh",t.HIDE_UNUSED_ENTITIES="hide_unused_entities",t.HIDE_RELOAD_RESOURCES="hide_reload_resources",t.HIDE_EDIT_DASHBOARD="hide_edit_dashboard",t.BLOCK_MOUSE="block_mouse"}(s||(s={}));var r,E,h="".concat("ui",".common"),d="".concat("ui",".panel"),u="".concat(d,".lovelace"),S="".concat(u,".menu");!function(t){t.SEARCH="SEARCH",t.ASSIST="ASSIST",t.REFRESH="REFRESH",t.UNUSED_ENTITIES="UNUSED_ENTITIES",t.RELOAD_RESOURCES="RELOAD_RESOURCES",t.EDIT_DASHBOARD="EDIT_DASHBOARD"}(r||(r={})),function(t){t.STORAGE="storage",t.YAML="yaml"}(E||(E={}));var l,_=Object.freeze(((t={})[r.SEARCH]="".concat(S,".search"),t[r.ASSIST]="".concat(S,".assist"),t[r.REFRESH]="".concat(h,".refresh"),t[r.UNUSED_ENTITIES]="".concat(u,".unused_entities.title"),t[r.RELOAD_RESOURCES]="".concat(S,".reload_resources"),t[r.EDIT_DASHBOARD]="".concat(S,".configure_ui"),t));!function(t){t.HOME_ASSISTANT="home-assistant",t.HOME_ASSISTANT_MAIN="home-assistant-main",t.HA_PANEL_LOVELACE="ha-panel-lovelace",t.PARTIAL_PANEL_RESOLVER="partial-panel-resolver",t.HUI_ROOT="hui-root",t.HUI_VIEW="hui-view",t.MENU_ITEM="ha-icon-button",t.MENU_ITEM_ICON="mwc-icon-button",t.OVERLAY_MENU="ha-button-menu",t.OVERLAY_MENU_ITEM="mwc-list-item",t.APP_DRAWER_LAYOUT="app-drawer-layout",t.APP_TOOLBAR="app-toolbar",t.APP_DRAWER="app-drawer",t.HA_SIDEBAR="ha-sidebar",t.HA_DRAWER="ha-drawer",t.TOOLBAR=".toolbar",t.ACTION_ITEMS=".action-items"}(l||(l={}));var R="true",A="boolean",O="state_changed",D=function(t){return Array.isArray(t)?t:[t]},T=function(t){return t instanceof ShadowRoot?t.host.localName:t.localName},I=function(t){var e=T(t);return t.querySelector("#".concat(c,"_").concat(e))},U=function(t,e){var i=T(e),o=I(e);o||((o=document.createElement("style")).setAttribute("id","".concat(c,"_").concat(i)),e.appendChild(o)),o.innerHTML=t},f=function(t){D(t).forEach((function(t){var e=T(t);I(t)&&t.querySelector("#".concat(c,"_").concat(e)).remove()}))},p=function(t){return D(t).some((function(t){return window.location.search.includes(t)}))},H=function(t,e){D(t).forEach((function(t){return window.localStorage.setItem(t,e)}))},N=function(t){return D(t).some((function(t){return window.localStorage.getItem(t)===R}))},M=function(t){return Object.entries(t).map((function(t){var e=t[0],i=t[1];return"".concat(e,":").concat(i)})).join(";")+";"},b=function(t){return Object.entries(t).map((function(t){var e=t[0],i=t[1];return"".concat(e,"{").concat(M(i),"}")})).join("")},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return"".concat(t,"{display: none !important;}")})).join("")},v=function(t){var e=0,i=Object.values(_);return new Promise((function(o,n){var s=function(){var a,c=null===(a=null==t?void 0:t.hass)||void 0===a?void 0:a.resources,r=!1;if(c){var E=t.hass.language;i.find((function(t){return!c[E][t]}))||(r=!0)}r?o(c):++e<200?setTimeout(s,50):n()};s()}))},L=function(t){return new Promise((function(e,i){var o=0,n=function(){var s=t();s&&s.length?e(s):++o<200?setTimeout(n,50):i()};n()}))},w="app-toolbar",C=".toolbar",y=".action-items",k="ha-button-menu",B="mwc-list-item",g={HEADER:b({"#view":{"min-height":"100vh !important","--header-height":"0px"}}),ACCOUNT:m(".profile"),MENU_BUTTON:m(".menu ha-icon-button"),MENU_BUTTON_BURGER:m("ha-menu-button"),MOUSE:b({"body::after":{bottom:"0",content:'""',cursor:"none",display:"block",left:"0",position:"fixed",right:"0",top:"0","z-index":"999999"}})},F={HEADER:b({"app-header":{display:"none"}}),SIDEBAR:b({":host":{"--app-drawer-width":"0 !important"},"#drawer":{display:"none"}}),OVERFLOW_MENU:m("".concat(w," > ").concat(k)),OVERFLOW_MENU_EMPTY_DESKTOP:m("".concat(w," > ").concat(k,"[data-lovelace-mode=").concat(E.STORAGE,'][data-children="1"]'),"".concat(w," > ").concat(k,"[data-lovelace-mode=").concat(E.YAML,'][data-children="4"]')),OVERFLOW_MENU_EMPTY_MOBILE:m("".concat(w," > ").concat(k,"[data-lovelace-mode=").concat(E.STORAGE,'][data-children="3"]'),"".concat(w," > ").concat(k,"[data-lovelace-mode=").concat(E.YAML,'][data-children="6"]')),SEARCH:m("".concat(w,' > ha-icon-button[data-selector="').concat(r.SEARCH,'"]'),"".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.SEARCH,'"]')),ASSISTANT:m("".concat(w,' > ha-icon-button[data-selector="').concat(r.ASSIST,'"]'),"".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.ASSIST,'"]')),REFRESH:m("".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.REFRESH,'"]')),UNUSED_ENTITIES:m("".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.UNUSED_ENTITIES,'"]')),RELOAD_RESOURCES:m("".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.RELOAD_RESOURCES,'"]')),EDIT_DASHBOARD:m("".concat(w," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.EDIT_DASHBOARD,'"]'))},K={HEADER:b({".header":{display:"none"}}),SIDEBAR:b({":host":{"--mdc-drawer-width":"0 !important"},"partial-panel-resolver":{"--mdc-top-app-bar-width":"100% !important"},"ha-drawer > ha-sidebar":{display:"none"},".header":{width:"100% !important"}}),ASIDE:m(".mdc-drawer"),OVERFLOW_MENU:m("".concat(C," > ").concat(y," > ").concat(k)),OVERFLOW_MENU_EMPTY_DESKTOP:m("".concat(C," > ").concat(y," > ").concat(k,"[data-lovelace-mode=").concat(E.STORAGE,'][data-children="1"]'),"".concat(C," > ").concat(y," > ").concat(k,"[data-lovelace-mode=").concat(E.YAML,'][data-children="4"]')),OVERFLOW_MENU_EMPTY_MOBILE:m("".concat(C," > ").concat(y," > ").concat(k,"[data-lovelace-mode=").concat(E.STORAGE,'][data-children="3"]'),"".concat(C," > ").concat(y," > ").concat(k,"[data-lovelace-mode=").concat(E.YAML,'][data-children="6"]')),SEARCH:m("".concat(C," > ").concat(y,' > ha-icon-button[data-selector="').concat(r.SEARCH,'"]'),"".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.SEARCH,'"]')),ASSISTANT:m("".concat(C," > ").concat(y,' > ha-icon-button[data-selector="').concat(r.ASSIST,'"]'),"".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.ASSIST,'"]')),REFRESH:m("".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.REFRESH,'"]')),UNUSED_ENTITIES:m("".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.UNUSED_ENTITIES,'"]')),RELOAD_RESOURCES:m("".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.RELOAD_RESOURCES,'"]')),EDIT_DASHBOARD:m("".concat(C," > ").concat(y," > ").concat(k," > ").concat(B,'[data-selector="').concat(r.EDIT_DASHBOARD,'"]'))},W=function(t){return t?{HEADER:"".concat(g.HEADER).concat(F.HEADER),SIDEBAR:F.SIDEBAR,ASIDE:"",ACCOUNT:g.ACCOUNT,MENU_BUTTON:g.MENU_BUTTON,MENU_BUTTON_BURGER:g.MENU_BUTTON_BURGER,OVERFLOW_MENU:F.OVERFLOW_MENU,OVERFLOW_MENU_EMPTY_DESKTOP:F.OVERFLOW_MENU_EMPTY_DESKTOP,OVERFLOW_MENU_EMPTY_MOBILE:F.OVERFLOW_MENU_EMPTY_MOBILE,SEARCH:F.SEARCH,ASSISTANT:F.ASSISTANT,REFRESH:F.REFRESH,UNUSED_ENTITIES:F.UNUSED_ENTITIES,RELOAD_RESOURCES:F.RELOAD_RESOURCES,EDIT_DASHBOARD:F.EDIT_DASHBOARD,MOUSE:g.MOUSE}:{HEADER:"".concat(g.HEADER).concat(K.HEADER),SIDEBAR:K.SIDEBAR,ASIDE:K.ASIDE,ACCOUNT:g.ACCOUNT,MENU_BUTTON:g.MENU_BUTTON,MENU_BUTTON_BURGER:g.MENU_BUTTON_BURGER,OVERFLOW_MENU:K.OVERFLOW_MENU,OVERFLOW_MENU_EMPTY_DESKTOP:K.OVERFLOW_MENU_EMPTY_DESKTOP,OVERFLOW_MENU_EMPTY_MOBILE:K.OVERFLOW_MENU_EMPTY_MOBILE,SEARCH:K.SEARCH,ASSISTANT:K.ASSISTANT,REFRESH:K.REFRESH,UNUSED_ENTITIES:K.UNUSED_ENTITIES,RELOAD_RESOURCES:K.RELOAD_RESOURCES,EDIT_DASHBOARD:K.EDIT_DASHBOARD,MOUSE:g.MOUSE}},P=function(){function t(){this.lines=[{content:"%c≡ kiosk-mode",color:"white",background:"#03a9f4"},{content:"%cversion ".concat("1.9.0")}]}return t.prototype.log=function(){var t=[],i=[],o=this.lines.length-1,n={display:"inline-block","font-size":"12px","border-style":"solid","border-color":"#424242"};this.lines.forEach((function(s,a){t.push(s.content.padEnd(27)),t.push("%c⋮"),a!==o&&t.push("%c\n");var c="0 0 0 1px",r="0 1px 0 1px";0===o?(c="1px 0 1px 1px",r="1px 1px 1px 0"):0===a?(c="1px 0 0 1px",r="1px 1px 0 0"):a===o&&(c="0 0 1px 1px",r="0 1px 1px 0"),i.push(M(e(e({},n),{background:s.background||"white",color:s.color||"#424242",padding:0===a?"5px 0 5px 5px":"7px 0 7px 10px","border-width":c}))),i.push(M(e(e({},n),{background:s.background||"white",color:s.color||"white",padding:0===a?"5px":"7px 5px 7px 0px","border-width":r}))),a!==o&&i.push("")})),console.info.apply(console,function(t,e,i){if(i||2===arguments.length)for(var o,n=0,s=e.length;n<s;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}([t.join("")],i,!1))},t}(),V=function(){function t(){var t,e,c,r=this;window.kioskModeEntities={},p(s.CLEAR_CACHE)&&H([n.HEADER,n.SIDEBAR,n.OVERFLOW,n.MENU_BUTTON,n.ACCOUNT,n.SEARCH,n.ASSISTANT,n.REFRESH,n.UNUSED_ENTITIES,n.RELOAD_RESOURCES,n.EDIT_DASHBOARD,n.MOUSE],"false"),this.ha=document.querySelector(l.HOME_ASSISTANT),this.main=this.ha.shadowRoot.querySelector(l.HOME_ASSISTANT_MAIN).shadowRoot,this.user=this.ha.hass.user,this.isLegacy=function(t){var e=function(t){var e=t?t.match(/^(\d+)\.(\d+)\.(\w+)$/):null;return e?[+e[1],+e[2],e[3]]:null}(t);return!!t&&e[0]<=2023&&e[1]<=3}(null===(e=null===(t=this.ha.hass)||void 0===t?void 0:t.config)||void 0===e?void 0:e.version),this.llAttempts=0,this.resizeWindowBinded=this.resizeWindow.bind(this),this.run(),this.entityWatch(),(c=this.ha,i(void 0,void 0,void 0,(function(){var t,e,i,n,s;return o(this,(function(o){switch(o.label){case 0:return[4,v(c)];case 1:return t=o.sent(),e=c.hass.language,i=t[e],n=Object.entries(_),s=n.map((function(t){var e=t[0],o=t[1];return[i[o],e]})),[2,Object.fromEntries(s)]}}))}))).then((function(t){r.menuTranslations=t,r.updateMenuItemsLabels()})).catch((function(){console.info("".concat(a," Cannot get resources translations"))})),new MutationObserver(this.watchDashboards).observe(this.main.querySelector(l.PARTIAL_PANEL_RESOLVER),{childList:!0})}return t.prototype.run=function(t){void 0===t&&(t=this.main.querySelector(l.HA_PANEL_LOVELACE)),t&&(this.lovelace=t,this.getConfig())},t.prototype.getConfig=function(){var t=this;this.llAttempts++;try{var e=this.lovelace.lovelace.config.kiosk_mode||{};this.processConfig(e)}catch(e){this.llAttempts<200?setTimeout((function(){return t.getConfig()}),50):(console.log("Lovelace config not found, continuing with default configuration."),console.log(e),this.processConfig({}))}},t.prototype.processConfig=function(t){var e=this,i=this.ha.hass.panelUrl;if(window.kioskModeEntities[i]||(window.kioskModeEntities[i]=[]),this.hideHeader=!1,this.hideSidebar=!1,this.hideOverflow=!1,this.hideMenuButton=!1,this.hideAccount=!1,this.hideSearch=!1,this.hideAssistant=!1,this.hideRefresh=!1,this.hideUnusedEntities=!1,this.hideReloadResources=!1,this.hideEditDashboard=!1,this.blockMouse=!1,this.ignoreEntity=!1,this.ignoreMobile=!1,this.ignoreDisableKm=!1,this.mode=this.lovelace.lovelace.mode,this.huiRoot=this.lovelace.shadowRoot.querySelector(l.HUI_ROOT).shadowRoot,this.isLegacy){this.drawerLayout=this.main.querySelector(l.APP_DRAWER_LAYOUT),this.appToolbar=this.huiRoot.querySelector(l.APP_TOOLBAR);var o=this.drawerLayout.querySelector(l.APP_DRAWER);this.sideBarRoot=o.querySelector(l.HA_SIDEBAR).shadowRoot,this.overlayMenu=this.appToolbar.querySelector(":scope > ".concat(l.OVERLAY_MENU))}else this.drawerLayout=this.main.querySelector(l.HA_DRAWER),this.appToolbar=this.huiRoot.querySelector(l.TOOLBAR),this.sideBarRoot=this.drawerLayout.querySelector(l.HA_SIDEBAR).shadowRoot,this.overlayMenu=this.appToolbar.querySelector(":scope > ".concat(l.ACTION_ITEMS," > ").concat(l.OVERLAY_MENU));var a=N([n.HEADER,n.SIDEBAR,n.OVERFLOW,n.MENU_BUTTON,n.ACCOUNT,n.SEARCH,n.ASSISTANT,n.REFRESH,n.UNUSED_ENTITIES,n.RELOAD_RESOURCES,n.EDIT_DASHBOARD,n.MOUSE])||p([s.KIOSK,s.HIDE_HEADER,s.HIDE_SIDEBAR,s.HIDE_OVERFLOW,s.HIDE_MENU_BUTTON,s.HIDE_ACCOUNT,s.HIDE_SEARCH,s.HIDE_ASSISTANT,s.HIDE_REFRESH,s.HIDE_RELOAD_RESOURCES,s.HIDE_UNUSED_ENTITIES,s.HIDE_EDIT_DASHBOARD,s.BLOCK_MOUSE]);a&&(this.hideHeader=N(n.HEADER)||p([s.KIOSK,s.HIDE_HEADER]),this.hideSidebar=N(n.SIDEBAR)||p([s.KIOSK,s.HIDE_SIDEBAR]),this.hideOverflow=N(n.OVERFLOW)||p([s.KIOSK,s.HIDE_OVERFLOW]),this.hideMenuButton=N(n.MENU_BUTTON)||p([s.KIOSK,s.HIDE_MENU_BUTTON]),this.hideAccount=N(n.ACCOUNT)||p([s.KIOSK,s.HIDE_ACCOUNT]),this.hideSearch=N(n.SEARCH)||p([s.KIOSK,s.HIDE_SEARCH]),this.hideAssistant=N(n.ASSISTANT)||p([s.KIOSK,s.HIDE_ASSISTANT]),this.hideRefresh=N(n.REFRESH)||p([s.KIOSK,s.HIDE_REFRESH]),this.hideUnusedEntities=N(n.UNUSED_ENTITIES)||p([s.KIOSK,s.HIDE_UNUSED_ENTITIES]),this.hideReloadResources=N(n.RELOAD_RESOURCES)||p([s.KIOSK,s.HIDE_RELOAD_RESOURCES]),this.hideEditDashboard=N(n.EDIT_DASHBOARD)||p([s.KIOSK,s.HIDE_EDIT_DASHBOARD]),this.blockMouse=N(n.MOUSE)||p([s.BLOCK_MOUSE])),this.hideHeader=a?this.hideHeader:t.kiosk||t.hide_header,this.hideSidebar=a?this.hideSidebar:t.kiosk||t.hide_sidebar,this.hideOverflow=a?this.hideOverflow:t.kiosk||t.hide_overflow,this.hideMenuButton=a?this.hideMenuButton:t.kiosk||t.hide_menubutton,this.hideAccount=a?this.hideAccount:t.kiosk||t.hide_account,this.hideSearch=a?this.hideSearch:t.kiosk||t.hide_search,this.hideAssistant=a?this.hideAssistant:t.kiosk||t.hide_assistant,this.hideRefresh=a?this.hideRefresh:t.kiosk||t.hide_refresh,this.hideUnusedEntities=a?this.hideUnusedEntities:t.kiosk||t.hide_unused_entities,this.hideReloadResources=a?this.hideReloadResources:t.kiosk||t.hide_reload_resources,this.hideEditDashboard=a?this.hideEditDashboard:t.kiosk||t.hide_edit_dashboard,this.blockMouse=a?this.blockMouse:t.block_mouse;var c=this.user.is_admin?t.admin_settings:t.non_admin_settings;c&&this.setOptions(c),t.user_settings&&D(t.user_settings).forEach((function(t){D(t.users).some((function(t){return t.toLowerCase()===e.user.name.toLowerCase()}))&&e.setOptions(t)}));var r=this.ignoreMobile?null:t.mobile_settings;if(r){var E=r.custom_width?r.custom_width:812;window.innerWidth<=E&&this.setOptions(r)}var h=this.ignoreEntity?null:t.entity_settings;if(h)for(var d=0,u=h;d<u.length;d++){var S=u[d],_=Object.keys(S.entity)[0];window.kioskModeEntities[i].includes(_)||window.kioskModeEntities[i].push(_),this.ha.hass.states[_].state==S.entity[_]&&(s.HIDE_HEADER in S&&(this.hideHeader=S[s.HIDE_HEADER]),s.HIDE_SIDEBAR in S&&(this.hideSidebar=S[s.HIDE_SIDEBAR]),s.HIDE_OVERFLOW in S&&(this.hideOverflow=S[s.HIDE_OVERFLOW]),s.HIDE_MENU_BUTTON in S&&(this.hideMenuButton=S[s.HIDE_MENU_BUTTON]),s.HIDE_ACCOUNT in S&&(this.hideAccount=S[s.HIDE_ACCOUNT]),s.HIDE_SEARCH in S&&(this.hideSearch=S[s.HIDE_SEARCH]),s.HIDE_ASSISTANT in S&&(this.hideAssistant=S[s.HIDE_ASSISTANT]),s.HIDE_REFRESH in S&&(this.hideRefresh=S[s.HIDE_REFRESH]),s.HIDE_UNUSED_ENTITIES in S&&(this.hideUnusedEntities=S[s.HIDE_UNUSED_ENTITIES]),s.HIDE_RELOAD_RESOURCES in S&&(this.hideReloadResources=S[s.HIDE_RELOAD_RESOURCES]),s.HIDE_EDIT_DASHBOARD in S&&(this.hideEditDashboard=S[s.HIDE_EDIT_DASHBOARD]),s.BLOCK_MOUSE in S&&(this.blockMouse=S[s.BLOCK_MOUSE]),s.KIOSK in S&&(this.hideHeader=this.hideSidebar=S[s.KIOSK]))}p(s.DISABLE_KIOSK_MODE)&&!this.ignoreDisableKm||this.insertStyles()},t.prototype.insertStyles=function(){var t=W(this.isLegacy);if(this.hideHeader?(U(t.HEADER,this.huiRoot),p(s.CACHE)&&H(n.HEADER,R)):f(this.huiRoot),this.hideSidebar?(U(t.SIDEBAR,this.drawerLayout),this.isLegacy||U(t.ASIDE,this.drawerLayout.shadowRoot),p(s.CACHE)&&H(n.SIDEBAR,R)):(f(this.drawerLayout),this.isLegacy||f(this.drawerLayout.shadowRoot)),this.hideAccount||this.hideMenuButton){var e=[this.hideAccount?t.ACCOUNT:"",this.hideMenuButton?t.MENU_BUTTON:""];U(e.join(""),this.sideBarRoot),this.hideAccount&&p(s.CACHE)&&H(n.ACCOUNT,R)}else f(this.sideBarRoot);if(this.hideSearch||this.hideAssistant||this.hideRefresh||this.hideUnusedEntities||this.hideReloadResources||this.hideEditDashboard||this.hideMenuButton||this.hideOverflow||this.hideSidebar){e=[this.hideSearch?t.SEARCH:"",this.hideAssistant?t.ASSISTANT:"",this.hideRefresh?t.REFRESH:"",this.hideUnusedEntities?t.UNUSED_ENTITIES:"",this.hideReloadResources?t.RELOAD_RESOURCES:"",this.hideEditDashboard?t.EDIT_DASHBOARD:"",this.hideOverflow?t.OVERFLOW_MENU:"",this.hideEditDashboard&&(this.mode===E.STORAGE||this.mode===E.YAML&&this.hideRefresh&&this.hideUnusedEntities&&this.hideReloadResources)?t.OVERFLOW_MENU_EMPTY_DESKTOP:"",this.hideSearch&&this.hideAssistant&&this.hideEditDashboard&&(this.mode===E.STORAGE||this.mode===E.YAML&&this.hideRefresh&&this.hideUnusedEntities&&this.hideReloadResources)?t.OVERFLOW_MENU_EMPTY_MOBILE:"",this.hideMenuButton||this.hideSidebar?t.MENU_BUTTON_BURGER:""];U(e.join(""),this.appToolbar),p(s.CACHE)&&(this.hideSearch&&H(n.SEARCH,R),this.hideAssistant&&H(n.ASSISTANT,R),this.hideRefresh&&H(n.REFRESH,R),this.hideUnusedEntities&&H(n.UNUSED_ENTITIES,R),this.hideReloadResources&&H(n.RELOAD_RESOURCES,R),this.hideEditDashboard&&H(n.EDIT_DASHBOARD,R),this.hideOverflow&&H(n.OVERFLOW,R),this.hideMenuButton&&H(n.MENU_BUTTON,R))}else f(this.appToolbar);this.blockMouse?(U(t.MOUSE,document.body),p(s.CACHE)&&H(n.MOUSE,R)):f(document.body),window.removeEventListener("resize",this.resizeWindowBinded),window.addEventListener("resize",this.resizeWindowBinded),window.dispatchEvent(new Event("resize")),this.llAttempts=0},t.prototype.resizeWindow=function(){var t=this;window.clearTimeout(this.resizeDelay),this.resizeDelay=window.setTimeout((function(){t.updateMenuItemsLabels()}),250)},t.prototype.watchDashboards=function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){t.localName===l.HA_PANEL_LOVELACE&&window.KioskMode.run(t)}))}))},t.prototype.updateMenuItemsLabels=function(){var t=this;if(this.menuTranslations){L((function(){return t.isLegacy?t.appToolbar.querySelectorAll(":scope > ".concat(l.MENU_ITEM)):t.appToolbar.querySelectorAll(":scope > ".concat(l.ACTION_ITEMS," > ").concat(l.MENU_ITEM))})).then((function(e){e.forEach((function(e){if(e&&e.dataset&&!e.dataset.selector){var i=e.shadowRoot.querySelector(l.MENU_ITEM_ICON);e.dataset.selector=t.menuTranslations[i.title]}}))})).catch((function(){console.info("".concat(a," Cannot select app toolbar menu items"))})),this.user.is_admin&&L((function(){return t.appToolbar.querySelectorAll(l.OVERLAY_MENU_ITEM)})).then((function(e){e.forEach((function(e){if(e&&e.dataset&&!e.dataset.selector){var i=e.textContent.trim();e.dataset.selector=t.menuTranslations[i]}})),t.overlayMenu&&t.overlayMenu.dataset&&(t.overlayMenu.dataset.children="".concat(e.length),t.overlayMenu.dataset.lovelaceMode||(t.overlayMenu.dataset.lovelaceMode=t.mode))})).catch((function(){console.info("".concat(a," Cannot select overflow menu items"))}))}},t.prototype.entityWatch=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return[4,window.hassConnection];case 1:return e.sent().conn.subscribeMessage((function(e){return t.entityWatchCallback(e)}),{type:"subscribe_events",event_type:O}),[2]}}))}))},t.prototype.entityWatchCallback=function(t){var e=window.kioskModeEntities[this.ha.hass.panelUrl]||[];!e.length||t.event_type!==O||!e.includes(t.data.entity_id)||t.data.old_state&&t.data.new_state.state===t.data.old_state.state||this.run()},t.prototype.setOptions=function(t){this.hideHeader=t.kiosk||t.hide_header,this.hideSidebar=t.kiosk||t.hide_sidebar,this.hideOverflow=t.kiosk||t.hide_overflow,this.hideMenuButton=t.kiosk||t.hide_menubutton,this.hideAccount=t.kiosk||t.hide_account,this.hideSearch=t.kiosk||t.hide_search,this.hideAssistant=t.kiosk||t.hide_assistant,this.hideRefresh=t.kiosk||t.hide_refresh,this.hideUnusedEntities=t.kiosk||t.hide_unused_entities,this.hideReloadResources=t.kiosk||t.hide_reload_resources,this.hideEditDashboard=t.kiosk||t.hide_edit_dashboard,this.blockMouse=t.block_mouse,this.ignoreEntity=typeof t.ignore_entity_settings===A?t.ignore_entity_settings:this.ignoreEntity,this.ignoreMobile=typeof t.ignore_mobile_settings===A?t.ignore_mobile_settings:this.ignoreMobile,this.ignoreDisableKm=typeof t.ignore_disable_km===A?t.ignore_disable_km:this.ignoreDisableKm},t}();(new P).log(),Promise.resolve(customElements.whenDefined(l.HUI_VIEW)).then((function(){window.KioskMode=new V}))}();
